{% extends 'base.html' %}

{% block content %}
{% with messages = get_flashed_messages() %}
    {% if messages %}
        <div class="notification is-danger" align="center">
            {{ messages[0] }}
        </div>
    {% endif %}
{% endwith %}
<table>
    <tr>
        <th>{{ header[0]|upper }}</th>
        <th>{{ header[7]|upper }}</th>
        <th>{{ header[3]|upper }}</th>
        <th>{{ header[4]|upper }}</th>
        <th>{{ header[5]|upper }}</th>
        <th>{{ header[6]|upper }}</th>
        <th>VOTE</th>
    </tr>
    {% for repos in repositories %}
    <tr>
        <td align="center">
            <i>{{ repos.name|upper }}</i>
            {% if repos.git.startswith('https://github.com/') %}
                <br><a href="{{ repos.git }}"><img src="{{url_for('static', filename='github-mark.png')}}"
                width="30" height="30"/></a>
            {% elif repos.git.startswith('https://git.savannah.gnu.org/') %}
                <br><a href="{{ repos.git }}"><img src="{{url_for('static', filename='gnu-logo.png')}}"
                width="30" height="30"/></a>
            {% elif repos.git.startswith('https://gitlab.com/') %}
                <br><a href="{{ repos.git }}"><img src="{{url_for('static', filename='gitlab-logo-500.png')}}"
                width="30" height="30"/></a>
            {% else %}
                <br><a href="{{ repos.git }}"><img src="{{url_for('static', filename='git-logo.png')}}"
                width="30" height="30"/></a>
            {% endif %}
        </td>
        <td align="left">{{ repos.description }}</td>
        <td align="center">{{ repos.stars }}</td>
        <td align="center">{{ repos.watch }}</td>
        <td align="center">{{ repos.fork }}</td>
        <td align="center">
            {% if repos.lines_of_code == '0' %}
            N/A
            {% else %}
            {{ repos.lines_of_code }}
            {% endif %}
        </td>
        <td>
            <div class="container" align="center">
	            <form method="post" action="/data">
		        <input type="submit" value="LIKE" name="{{ repos.git }}">
	            </form>
                <br>{{ repos.like }}
            </div>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}